<section class="featured-categories">
  <div class="section-header">
    <h2>Lo que más buscan</h2>
    <h3>Categorías destacadas</h3>
  </div>
  <div class="categories-carousel">
    <button class="carousel-prev" aria-label="Anterior">&#10094;</button>
    <div class="carousel-track">
      {% for block in section.blocks %}
        {% assign collection = block.settings.collection %}
        {% if collection != blank %}
        <a href="{{ collection.url }}" class="category-item">
          <div class="circle-image">
            {{ collection.image | image_url: width: 200 | image_tag: class: 'category-img', alt: collection.title }}
          </div>
          <span class="category-title">{{ collection.title }}</span>
        </a>
        {% endif %}
      {% endfor %}
    </div>
    <button class="carousel-next" aria-label="Siguiente">&#10095;</button>
  </div>
</section>

<style>
.featured-categories {
  text-align: center;
  padding: 2rem 1rem;
  font-family: inherit;
}
.section-header h2 {
  font-size: 1.8rem;
  margin-bottom: 0.2rem;
  font-weight: bold;
  color: #333;
  font-family: inherit;
}
.section-header h3 {
  font-size: 1.1rem;
  color: #777;
  margin-bottom: 2rem;
  font-family: inherit;
}
.categories-carousel {
  position: relative;
  display: flex;
  align-items: center;
  overflow: hidden;
}
.carousel-track {
  display: flex;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  scroll-behavior: smooth;
}
.carousel-track::-webkit-scrollbar {
  display: none;
}
.category-item {
  flex: 0 0 auto;
  width: 120px;
  margin: 0 0.5rem;
  text-align: center;
  scroll-snap-align: start;
}
.circle-image {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  overflow: hidden;
  margin: 0 auto 0.5rem;
  border: 2px solid #eee;
}
.category-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.category-title {
  font-size: 1rem;
  color: #333;
  font-family: inherit;
}
.carousel-prev,
.carousel-next {
  background-color: transparent;
  border: none;
  font-size: 2rem;
  color: #b3b3b3;
  cursor: pointer;
  z-index: 1;
  padding: 0 1rem;
}
@media (max-width: 768px) {
  .carousel-prev,
  .carousel-next {
    display: none;
  }
  .category-item {
    margin: 0 0.25rem;
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function () {
  document.querySelectorAll('.featured-categories').forEach(function(section) {
    const prevBtn = section.querySelector('.carousel-prev');
    const nextBtn = section.querySelector('.carousel-next');
    const track = section.querySelector('.carousel-track');

    if (prevBtn && nextBtn && track) {
      prevBtn.addEventListener('click', function () {
        track.scrollLeft -= 200;
      });
      nextBtn.addEventListener('click', function () {
        track.scrollLeft += 200;
      });
    }
  });
});
</script>

{% schema %}
{
  "name": "Lo que más buscan",
  "settings": [],
  "blocks": [
    {
      "type": "collection",
      "name": "Colección",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Elige una colección"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Lo que más buscan",
      "category": "Secciones personalizadas"
    }
  ]
}
{% endschema %}
